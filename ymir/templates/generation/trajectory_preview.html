<div class="space-y-4">
    {% if saved %}
    <div class="bg-green-900 border border-green-700 text-green-300 px-4 py-2 rounded-md text-sm">
        Trajectory saved (ID: {{ trajectory.id[:8] }}...)
    </div>
    {% endif %}

    <div class="text-sm text-gray-400 mb-2">
        <span class="font-medium">{{ trajectory.turn_count() }}</span> turns,
        <span class="font-medium">{{ trajectory.tool_call_count() }}</span> tool calls
        {% if trajectory.quality_score %}
        | Quality: <span class="font-medium">{{ "%.2f"|format(trajectory.quality_score) }}</span>
        {% endif %}
    </div>

    <div class="space-y-3 max-h-[500px] overflow-y-auto">
        {% for message in trajectory.messages %}
        <div class="{% if message.role.value == 'user' %}message-user{% elif message.role.value == 'assistant' %}message-assistant{% else %}message-tool{% endif %} p-3 rounded-md">
            <div class="text-xs text-gray-400 mb-1 uppercase">{{ message.role.value }}</div>
            <div class="whitespace-pre-wrap text-sm">{{ message.content }}</div>
        </div>
        {% endfor %}
    </div>
</div>
